{"version":3,"sources":["src/Event.js","src/index.js","main.js"],"names":["Event","fn","once","EventEmitter","_events","_eventsCount","eventName","listener","option","e","indexOf","push","addListener","index","i","length","splice","removeListener","ee","on","console","log","emit"],"mappings":"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","file":"5ee019215b93661d9f972b0e05c3ad2e.map","sourcesContent":["function Event(fn, once) {\n  this.fn = fn\n  this.once = once || false\n}\n\nexport default Event","import Event from './Event'\n\nclass EventEmitter {\n  constructor() {\n    this._events = {}\n    this._eventsCount = 0\n  }\n\n  addListener(eventName, listener, option) {\n    let e = new Event(listener, option.once)\n    if (!this._events[eventName]) {\n      this._events[eventName] = [e]\n    } else {\n      if (this._events[eventName].indexOf(listener) < 0) {\n        this._events[eventName].push(e)\n      }\n    }\n  }\n\n  on(eventName, listener) {\n    this.addListener(eventName, listener, { once: false })\n  }\n\n  once(eventName, listener) {\n    this.addListener(eventName, listener, { once: true })\n  }\n\n  removeListener(eventName, listener) {\n    if (!this._events[eventName]) {\n      return\n    }\n\n    let index = -1\n    for (let i = 0; i < this._events[eventName].length; i++) {\n      if (listener === this._events[eventName][i].fn) {\n        index = i\n      }\n    }\n\n    if (index >= 0) {\n      this._events[eventName].splice(index, 1)\n    }\n  }\n\n  removeAllListeners() {\n    this._events = {}\n  }\n\n  emit(eventName) {\n    let listener = this._events[eventName]\n    if (!listener) {\n      return\n    }\n\n    for (let i = 0; i < listener.length; i++) {\n      if (listener[i].once) {\n        listener[i].fn()\n        this.removeListener(eventName, listener[i].fn)\n      } else {\n        listener[i].fn()\n      }\n    }\n\n  }\n}\n\nexport default EventEmitter\n","import Emitter from './src/index.js'\n\nlet ee = new Emitter()\nee.on('say', ()=>(console.log('emitted!')))\nee.emit('say')\n\nee.once('say once', ()=>(console.log('this message should only display once!')))\nee.emit('say once')\nee.emit('say once')\nee.emit('say once')\n"]}